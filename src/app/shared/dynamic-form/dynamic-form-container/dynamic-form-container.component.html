<div class="form-container">
    <form [formGroup]="dynamicForm">
        <mat-form-field appearance="fill">
            <mat-label>Credit Card Number *</mat-label>
            <input matInput formControlName="creditCardNumber">
            <mat-error *ngIf="dynamicForm.controls.creditCardNumber.touched && dynamicForm.controls.creditCardNumber.invalid">
                <span *ngIf="dynamicForm.controls.creditCardNumber.errors.required">Credit Card Number is required.</span>
                <span *ngIf="dynamicForm.controls.creditCardNumber.errors.onlyNumbers && !dynamicForm.controls.creditCardNumber.errors.required ">Credit Card Number accepts only numbers.</span>
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Cardholder name *</mat-label>
            <input matInput formControlName="cardholder">
            <mat-error *ngIf="dynamicForm.controls.cardholder.touched && dynamicForm.controls.cardholder.invalid">
                <span *ngIf="dynamicForm.controls.cardholder.errors.required">Cardholder name is required.</span>
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Expiration Date *</mat-label>
            <input
                matInput
                [matDatepicker]="picker"
                [min]="minDatePickerValue"
                formControlName="expirationDate">
            <mat-datepicker-toggle
                matSuffix
                [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="dynamicForm.controls.expirationDate.touched && dynamicForm.controls.expirationDate.invalid">
                <div *ngIf="dynamicForm.controls.expirationDate.errors.required">Expiration Date is required.</div>
                <div *ngIf="dynamicForm.controls.expirationDate.errors.minDate && !dynamicForm.controls.expirationDate.errors.required">Expiration Date must not be set in the past</div>
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Security Code</mat-label>
            <input matInput formControlName="securityCode" maxlength="3">
            <mat-error *ngIf="dynamicForm.controls.securityCode.touched && dynamicForm.controls.securityCode.invalid">
                <div *ngIf="dynamicForm.controls.securityCode.errors.onlyNumbers">Only numbers are allowed</div>
                <div *ngIf="dynamicForm.controls.securityCode.errors.maxlength || dynamicForm.controls.securityCode.errors.minlength">Security code length is 3</div>
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Amount *</mat-label>
            <input
                matInput
                min="0"
                type="number"
                formControlName="amount">
            <mat-error *ngIf="dynamicForm.controls.amount.touched && dynamicForm.controls.amount.invalid">
                <div *ngIf="dynamicForm.controls.amount.errors.required">Amount is required.</div>
                <div *ngIf="dynamicForm.controls.amount.errors.minValue && !dynamicForm.controls.amount.errors.required">Amount must be > 0</div>
            </mat-error>
        </mat-form-field>
    </form>
    <button
        (click)="onSubmit()"
        mat-raised-button
        color="primary">
        Submit
    </button>
</div>
